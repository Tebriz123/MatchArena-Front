<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒ∞dar…ô Paneli - MatchArena</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/inline-styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html" class="nav-logo-link">
                    <svg class="logo-icon" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="16" cy="16" r="16" fill="#22C55E"/>
                        <path d="M16 6C10.48 6 6 10.48 6 16C6 21.52 10.48 26 16 26C21.52 26 26 21.52 26 16C26 10.48 21.52 6 16 6ZM16 24C11.59 24 8 20.41 8 16C8 11.59 11.59 8 16 8C20.41 8 24 11.59 24 16C24 20.41 20.41 24 16 24ZM16 10L13.5 12.5L11 10L10 14L14 15L16 18L18 15L22 14L21 10L18.5 12.5L16 10Z" fill="white"/>
                    </svg>
                    <span>MatchArena</span>
                </a>
            </div>
            <div class="nav-menu">
                <a href="players.html" class="nav-link">Oyun√ßular</a>
                <a href="teams.html" class="nav-link">Komandalar</a>
                <a href="fields.html" class="nav-link">Meydan√ßalar</a>
                <a href="tournaments.html" class="nav-link">Turnirler</a>
            </div>
            <div class="nav-right">
                <button class="theme-toggle">üåê</button>
                <button class="notification-btn">üîî</button>
                <span class="user-name">ƒ∞stifad…ô√ßi</span>
                <button class="login-btn">Daxil ol</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="dashboard-container" style="max-width: 1200px; margin: 2rem auto; padding: 0 2rem;">
        <div class="dashboard-header" style="margin-bottom: 2rem;">
            <h1 id="dashboardTitle" style="font-size: 2rem; margin-bottom: 0.5rem;">ƒ∞dar…ô Paneli</h1>
            <p id="dashboardSubtitle" style="color: var(--text-muted);">Xo≈ü g…ôlmisiniz</p>
        </div>

        <!-- Role Info Card -->
        <div class="detail-card" style="margin-bottom: 2rem;">
            <h2 class="detail-card-title">Hesab M…ôlumatlarƒ±</h2>
            <div class="detail-info-card">
                <div class="detail-info-row">
                    <span class="info-label">Ad</span>
                    <span class="info-value" id="userName">-</span>
                </div>
                <div class="detail-info-row">
                    <span class="info-label">Email</span>
                    <span class="info-value" id="userEmail">-</span>
                </div>
                <div class="detail-info-row detail-info-row-last">
                    <span class="info-label">Rol</span>
                    <span class="info-value" id="userRole">-</span>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="detail-card">
            <h2 class="detail-card-title">ƒ∞caz…ôli ∆èm…ôliyyatlar</h2>
            <div id="permissionsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem;">
                <!-- Dynamically filled -->
            </div>
        </div>

        <!-- Available Features -->
        <div class="detail-card" style="margin-top: 2rem;">
            <h2 class="detail-card-title">ƒ∞caz…ôli Funksiyalar</h2>
            <div id="featuresList" style="display: flex; flex-direction: column; gap: 0.75rem;">
                <!-- Dynamically filled -->
            </div>
        </div>
    </main>

    <script src="assets/js/app.js"></script>
    <script src="assets/js/auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            if (!AuthManager.isLoggedIn()) {
                window.location.href = 'login.html';
                return;
            }

            const user = AuthManager.getCurrentUser();
            const role = user.role;

            // Update page title and info
            document.getElementById('dashboardTitle').textContent = `${AuthManager.getRoleDisplayName(role)} Paneli`;
            document.getElementById('dashboardSubtitle').textContent = `Xo≈ü g…ôlmisiniz, ${user.name}`;
            document.getElementById('userName').textContent = user.name;
            document.getElementById('userEmail').textContent = user.email;
            document.getElementById('userRole').textContent = AuthManager.getRoleDisplayName(role);

            // Show available actions based on role
            const permissionsGrid = document.getElementById('permissionsGrid');
            const actions = [];

            if (AuthManager.hasPermission(PERMISSIONS.CREATE_TEAM)) {
                actions.push({
                    title: 'Komanda Yarat',
                    icon: 'üë•',
                    link: 'create-team.html',
                    color: 'var(--primary-color)'
                });
            }

            if (AuthManager.hasPermission(PERMISSIONS.CREATE_TOURNAMENT)) {
                actions.push({
                    title: 'Turnir Yarat',
                    icon: 'üèÜ',
                    link: 'create-tournament.html',
                    color: '#3b82f6'
                });
            }

            if (AuthManager.hasPermission(PERMISSIONS.CREATE_FIELD)) {
                actions.push({
                    title: 'Meydan√ßa Yarat',
                    icon: '‚öΩ',
                    link: 'create-field.html',
                    color: '#f97316'
                });
            }

            if (AuthManager.hasPermission(PERMISSIONS.ACCESS_ADMIN_PANEL)) {
                actions.push({
                    title: 'Admin Panel',
                    icon: 'üîê',
                    link: 'admin-panel.html',
                    color: '#ef4444'
                });
            }

            actions.forEach(action => {
                const actionCard = document.createElement('a');
                actionCard.href = action.link;
                actionCard.style.cssText = `
                    display: flex;
                    align-items: center;
                    gap: 1rem;
                    padding: 1.5rem;
                    background: rgba(34, 197, 94, 0.1);
                    border: 1px solid ${action.color};
                    border-radius: 0.5rem;
                    text-decoration: none;
                    color: inherit;
                    transition: all 0.3s ease;
                `;
                actionCard.innerHTML = `
                    <span style="font-size: 2rem;">${action.icon}</span>
                    <span style="font-weight: 600; color: ${action.color};">${action.title}</span>
                `;
                actionCard.onmouseover = function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)';
                };
                actionCard.onmouseout = function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = 'none';
                };
                permissionsGrid.appendChild(actionCard);
            });

            if (actions.length === 0) {
                permissionsGrid.innerHTML = '<p style="color: var(--text-muted);">Hal-hazƒ±rda …ôlav…ô icaz…ôl…ôriniz yoxdur.</p>';
            }

            // Show all permissions
            const featuresList = document.getElementById('featuresList');
            const rolePermissions = ROLE_PERMISSIONS[role] || [];
            
            const featureNames = {
                [PERMISSIONS.CREATE_TOURNAMENT]: 'üèÜ Turnir yaratma',
                [PERMISSIONS.EDIT_TOURNAMENT]: '‚úèÔ∏è Turnir redakt…ôsi',
                [PERMISSIONS.DELETE_TOURNAMENT]: 'üóëÔ∏è Turnir silm…ô',
                [PERMISSIONS.MANAGE_TOURNAMENT]: '‚öôÔ∏è Turnir idar…ôsi',
                [PERMISSIONS.CREATE_TEAM]: 'üë• Komanda yaratma',
                [PERMISSIONS.EDIT_TEAM]: '‚úèÔ∏è Komanda redakt…ôsi',
                [PERMISSIONS.DELETE_TEAM]: 'üóëÔ∏è Komanda silm…ô',
                [PERMISSIONS.MANAGE_TEAM_MEMBERS]: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Komanda √ºzvl…ôrinin idar…ôsi',
                [PERMISSIONS.CREATE_FIELD]: '‚öΩ Meydan√ßa yaratma',
                [PERMISSIONS.EDIT_FIELD]: '‚úèÔ∏è Meydan√ßa redakt…ôsi',
                [PERMISSIONS.DELETE_FIELD]: 'üóëÔ∏è Meydan√ßa silm…ô',
                [PERMISSIONS.MANAGE_BOOKINGS]: 'üìÖ Rezervasiya idar…ôsi',
                [PERMISSIONS.ACCESS_ADMIN_PANEL]: 'üîê Admin panelin…ô giri≈ü',
                [PERMISSIONS.MANAGE_USERS]: 'üë§ ƒ∞stifad…ô√ßi idar…ôsi',
                [PERMISSIONS.MANAGE_REVIEWS]: '‚≠ê R…ôy idar…ôsi',
                [PERMISSIONS.VIEW_REPORTS]: 'üìä Hesabat g√∂r√ºnt√ºl…ôm…ô',
                [PERMISSIONS.VIEW_CONTENT]: 'üëÅÔ∏è M…ôzmun g√∂r√ºnt√ºl…ôm…ô',
                [PERMISSIONS.CREATE_REVIEW]: 'üí¨ R…ôy yazma',
                [PERMISSIONS.EDIT_PROFILE]: '‚úèÔ∏è Profil redakt…ôsi'
            };

            rolePermissions.forEach(permission => {
                const featureItem = document.createElement('div');
                featureItem.className = 'service-item';
                featureItem.innerHTML = `
                    <span class="service-check">‚úì</span>
                    <span>${featureNames[permission] || permission}</span>
                `;
                featuresList.appendChild(featureItem);
            });
        });
    </script>
</body>
</html>

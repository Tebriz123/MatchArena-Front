<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kateqoriyanƒ± Yenil…ô - MatchArena</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">
                    <svg class="logo-icon" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="16" cy="16" r="16" fill="#22C55E"/>
                        <path d="M16 6C10.48 6 6 10.48 6 16C6 21.52 10.48 26 16 26C21.52 26 26 21.52 26 16C26 10.48 21.52 6 16 6ZM16 24C11.59 24 8 20.41 8 16C8 11.59 11.59 8 16 8C20.41 8 24 11.59 24 16C24 20.41 20.41 24 16 24ZM16 10L13.5 12.5L11 10L10 14L14 15L16 18L18 15L22 14L21 10L18.5 12.5L16 10Z" fill="white"/>
                    </svg>
                    <span>MatchArena</span>
                </a>
            </div>
            <div class="nav-menu">
                <a href="players.html" class="nav-link">Oyun√ßular</a>
                <a href="teams.html" class="nav-link">Komandalar</a>
                <a href="fields.html" class="nav-link">Meydan√ßalar</a>
                <a href="tournaments.html" class="nav-link">Turnirler</a>
                <a href="products.html" class="nav-link">M…ôhsullar</a>
            </div>
            <div class="nav-right">
                <button class="theme-toggle">üåê</button>
                <button class="notification-btn">üîî</button>
                <span class="user-name">Admin</span>
                <a href="admin-panel.html" class="login-btn">Admin Panel</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <div class="form-container">
            <h1 class="section-title">Kateqoriyanƒ± Yenil…ô</h1>
            <p class="section-subtitle">Kateqoriya m…ôlumatlarƒ±nƒ± redakt…ô edin</p>

            <form class="create-form" id="updateCategoryForm">
                <!-- Hidden field for category ID -->
                <input type="hidden" id="categoryId" name="categoryId">

                <div class="form-section">
                    <h3 class="form-section-title">∆èsas M…ôlumatlar</h3>
                    
                    <div class="form-group">
                        <label for="categoryName" class="form-label">Kateqoriya Adƒ± *</label>
                        <input type="text" id="categoryName" name="categoryName" class="form-input" required placeholder="M…ôs. Avadanlƒ±q">
                    </div>

                    <div class="form-group">
                        <label for="categoryIcon" class="form-label">ƒ∞kon (Emoji) *</label>
                        <input type="text" id="categoryIcon" name="categoryIcon" class="form-input" required placeholder="M…ôs. ‚öΩ üëï üõ°Ô∏è üéí" maxlength="2">
                        <small class="form-hint">Bir emoji daxil edin (Windows: Win + . | Mac: Cmd + Ctrl + Space)</small>
                    </div>

                    <div class="form-group">
                        <label class="form-label">ƒ∞kon √ñnizl…ôm…ô</label>
                        <div style="display: flex; align-items: center; justify-content: center; width: 80px; height: 80px; background: linear-gradient(145deg, #1a1f2e, #232a3b); border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); font-size: 2.5rem;" id="iconPreview">
                            üìÇ
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="description" class="form-label">T…ôsvir</label>
                        <textarea id="description" name="description" class="form-textarea" rows="3" placeholder="Kateqoriya haqqƒ±nda qƒ±sa m…ôlumat (ixtiyari)"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="status" class="form-label">Status *</label>
                        <select id="status" name="status" class="form-input" required>
                            <option value="active">Aktiv</option>
                            <option value="inactive">ƒ∞naktiv</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">M…ôhsul Sayƒ±</label>
                        <div style="padding: 12px; background: linear-gradient(145deg, #1a1f2e, #232a3b); border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
                            <span style="color: rgba(255,255,255,0.9); font-weight: 600; font-size: 1.1rem;" id="productCount">0</span>
                            <span style="color: rgba(255,255,255,0.5); margin-left: 8px;">m…ôhsul</span>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="form-section-title">∆èlav…ô Parametrl…ôr</h3>
                    
                    <div class="form-group">
                        <label for="sortOrder" class="form-label">Sƒ±ralama</label>
                        <input type="number" id="sortOrder" name="sortOrder" class="form-input" min="0" value="0" placeholder="0">
                        <small class="form-hint">Kateqoriyalarƒ±n g√∂r√ºnm…ô ardƒ±cƒ±llƒ±ƒüƒ± (0 - …ôn √ºstd…ô)</small>
                    </div>

                    <div class="form-group">
                        <label class="form-label">X√ºsusiyy…ôtl…ôr</label>
                        <div class="form-checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="showInMenu" id="showInMenu">
                                <span>üìã Menyuda g√∂st…ôr</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="featured" id="featured">
                                <span>‚≠ê Se√ßilmi≈ü kateqoriya</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="form-section-title">SEO m…ôlumatlarƒ±</h3>
                    
                    <div class="form-group">
                        <label for="slug" class="form-label">URL Slug</label>
                        <input type="text" id="slug" name="slug" class="form-input" placeholder="avtomatik-yaradilacaq">
                        <small class="form-hint">URL-d…ô g√∂r√ºn…ôc…ôk ad</small>
                    </div>

                    <div class="form-group">
                        <label for="metaTitle" class="form-label">Meta Ba≈ülƒ±q</label>
                        <input type="text" id="metaTitle" name="metaTitle" class="form-input" placeholder="Axtarƒ±≈ü n…ôtic…ôl…ôrind…ô g√∂r√ºn…ôc…ôk ba≈ülƒ±q">
                    </div>

                    <div class="form-group">
                        <label for="metaDescription" class="form-label">Meta T…ôsvir</label>
                        <textarea id="metaDescription" name="metaDescription" class="form-textarea" rows="2" placeholder="Axtarƒ±≈ü n…ôtic…ôl…ôrind…ô g√∂r√ºn…ôc…ôk qƒ±sa t…ôsvir"></textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="window.location.href='admin-panel.html'">L…ôƒüv et</button>
                    <button type="submit" class="btn btn-primary">Kateqoriyanƒ± Yenil…ô</button>
                </div>
            </form>
        </div>
    </main>

    <script src="assets/js/app.js"></script>
    <script src="assets/js/auth.js"></script>
    <script>
        // Load category data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const categoryId = urlParams.get('id');
            
            if (categoryId) {
                loadCategoryData(categoryId);
            }
        });

        // Icon preview
        document.getElementById('categoryIcon').addEventListener('input', function(e) {
            const icon = e.target.value || 'üìÇ';
            document.getElementById('iconPreview').textContent = icon;
        });

        // Auto-generate slug from category name (only if not manually edited)
        document.getElementById('categoryName').addEventListener('input', function(e) {
            const slugInput = document.getElementById('slug');
            if (slugInput.dataset.autoGenerate !== 'false') {
                const slug = e.target.value
                    .toLowerCase()
                    .replace(/…ô/g, 'e')
                    .replace(/ƒ±/g, 'i')
                    .replace(/ƒü/g, 'g')
                    .replace(/√º/g, 'u')
                    .replace(/√∂/g, 'o')
                    .replace(/≈ü/g, 's')
                    .replace(/√ß/g, 'c')
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/^-+|-+$/g, '');
                slugInput.value = slug;
            }
        });

        // Prevent auto-generation if user manually edits slug
        document.getElementById('slug').addEventListener('input', function() {
            this.dataset.autoGenerate = 'false';
        });

        // Handle form submission
        document.getElementById('updateCategoryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            
            const categoryData = {
                id: document.getElementById('categoryId').value,
                name: formData.get('categoryName'),
                icon: formData.get('categoryIcon'),
                description: formData.get('description'),
                status: formData.get('status'),
                sortOrder: formData.get('sortOrder'),
                showInMenu: document.getElementById('showInMenu').checked,
                featured: document.getElementById('featured').checked,
                slug: formData.get('slug'),
                metaTitle: formData.get('metaTitle'),
                metaDescription: formData.get('metaDescription')
            };
            
            console.log('Updated Category Data:', categoryData);
            
            alert('Kateqoriya uƒüurla yenil…ôndi! ‚úì');
            window.location.href = 'admin-panel.html';
        });

        function loadCategoryData(categoryId) {
            // Demo data for different categories
            const demoCategories = {
                'C001': {
                    name: 'Avadanlƒ±q',
                    icon: '‚öΩ',
                    description: 'Futbol avadanlƒ±qlarƒ± v…ô aksesuarlarƒ±',
                    status: 'active',
                    sortOrder: 1,
                    showInMenu: true,
                    featured: true,
                    slug: 'avadanliq',
                    metaTitle: 'Futbol Avadanlƒ±qlarƒ± - MatchArena',
                    metaDescription: 'Professional futbol avadanlƒ±qlarƒ± v…ô aksesuarlarƒ±',
                    productCount: 45
                },
                'C002': {
                    name: 'Geyim',
                    icon: 'üëï',
                    description: 'ƒ∞dman geyiml…ôri v…ô formalar',
                    status: 'active',
                    sortOrder: 2,
                    showInMenu: true,
                    featured: true,
                    slug: 'geyim',
                    metaTitle: 'ƒ∞dman Geyiml…ôri - MatchArena',
                    metaDescription: 'Keyfiyy…ôtli futbol formalarƒ± v…ô idman geyiml…ôri',
                    productCount: 78
                },
                'C003': {
                    name: 'Qoruyucu',
                    icon: 'üõ°Ô∏è',
                    description: 'T…ôhl√ºk…ôsizlik v…ô qoruyucu avadanlƒ±qlar',
                    status: 'active',
                    sortOrder: 3,
                    showInMenu: true,
                    featured: false,
                    slug: 'qoruyucu',
                    metaTitle: 'Qoruyucu Avadanlƒ±qlar - MatchArena',
                    metaDescription: 'Maksimum t…ôhl√ºk…ôsizlik √º√ß√ºn qoruyucu avadanlƒ±qlar',
                    productCount: 23
                },
                'C004': {
                    name: 'Aksesuar',
                    icon: 'üéí',
                    description: 'ƒ∞dman √ßantalarƒ± v…ô …ôlav…ô aksesuarlar',
                    status: 'active',
                    sortOrder: 4,
                    showInMenu: true,
                    featured: false,
                    slug: 'aksesuar',
                    metaTitle: 'ƒ∞dman Aksesuarlarƒ± - MatchArena',
                    metaDescription: 'Futbol√ßular √º√ß√ºn faydalƒ± aksesuar v…ô avadanlƒ±qlar',
                    productCount: 12
                }
            };

            const category = demoCategories[categoryId] || demoCategories['C001'];
            
            // Fill form fields
            document.getElementById('categoryId').value = categoryId;
            document.getElementById('categoryName').value = category.name;
            document.getElementById('categoryIcon').value = category.icon;
            document.getElementById('iconPreview').textContent = category.icon;
            document.getElementById('description').value = category.description || '';
            document.getElementById('status').value = category.status;
            document.getElementById('sortOrder').value = category.sortOrder;
            document.getElementById('showInMenu').checked = category.showInMenu;
            document.getElementById('featured').checked = category.featured;
            document.getElementById('slug').value = category.slug;
            document.getElementById('slug').dataset.autoGenerate = 'false';
            document.getElementById('productCount').textContent = category.productCount;
            
            if (category.metaTitle) document.getElementById('metaTitle').value = category.metaTitle;
            if (category.metaDescription) document.getElementById('metaDescription').value = category.metaDescription;
        }
    </script>
</body>
</html>
